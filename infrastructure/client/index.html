<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.58.3" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="//egendata.github.io/docs/images/egendata.png" type="image/x-icon" />
    <title>client :: My New Hugo Site</title>

    
    <link href="/docs/css/nucleus.css?1571319208" rel="stylesheet">
    <link href="/docs/css/fontawesome-all.min.css?1571319208" rel="stylesheet">
    <link href="/docs/css/hybrid.css?1571319208" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css?1571319208" rel="stylesheet">
    <link href="/docs/css/perfect-scrollbar.min.css?1571319208" rel="stylesheet">
    <link href="/docs/css/auto-complete.css?1571319208" rel="stylesheet">
    <link href="/docs/css/atom-one-dark-reasonable.css?1571319208" rel="stylesheet">
    <link href="/docs/css/theme.css?1571319208" rel="stylesheet">
    <link href="/docs/css/hugo-theme.css?1571319208" rel="stylesheet">
    
      <link href="/docs/css/theme-mine.css?1571319208" rel="stylesheet">
    

    <script src="/docs/js/jquery-3.3.1.min.js?1571319208"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/infrastructure/client/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="//egendata.github.io/docs">
  <img alt="Egendata" src="//egendata.github.io/docs/images/egendata.png" />
</a>
    </div>
    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/architecture/" title="Architecture" class="dd-item 
        
        
        
        ">
      <a href="/docs/architecture/">
          Architecture
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/cryptography/" title="Cryptography" class="dd-item 
        
        
        
        ">
      <a href="/docs/cryptography/">
          Cryptography
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/egendata-core/" title="Egendata Core" class="dd-item 
        
        
        
        ">
      <a href="/docs/egendata-core/">
          Egendata Core
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/docs/egendata-core/client/" title="Client" class="dd-item 
        
        
        
        ">
      <a href="/docs/egendata-core/client/">
          Client
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/egendata-core/data/" title="Data" class="dd-item 
        
        
        
        ">
      <a href="/docs/egendata-core/data/">
          Data
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/egendata-core/security/" title="Security" class="dd-item 
        
        
        
        ">
      <a href="/docs/egendata-core/security/">
          Security
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/egendata-core/services/" title="Services" class="dd-item 
        
        
        
        ">
      <a href="/docs/egendata-core/services/">
          Services
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/infrastructure/" title="Infrastructure" class="dd-item 
        parent
        
        
        ">
      <a href="/docs/infrastructure/">
          Infrastructure
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/cli/" title="cli" class="dd-item 
        
        
        
        ">
      <a href="/docs/infrastructure/cli/">
          cli
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/client/" title="client" class="dd-item 
        parent
        active
        
        ">
      <a href="/docs/infrastructure/client/">
          client
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/example-cv/" title="Example-CV" class="dd-item 
        
        
        
        ">
      <a href="/docs/infrastructure/example-cv/">
          Example-CV
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/example-national-registration/" title="Example-National-Registration" class="dd-item 
        
        
        
        ">
      <a href="/docs/infrastructure/example-national-registration/">
          Example-National-Registration
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/messaging/" title="messaging" class="dd-item 
        
        
        
        ">
      <a href="/docs/infrastructure/messaging/">
          messaging
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/operator/" title="Operator" class="dd-item 
        
        
        
        ">
      <a href="/docs/infrastructure/operator/">
          Operator
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/infrastructure/react-native-simple-crypto/" title="react-native-simple-crypto" class="dd-item 
        
        
        
        ">
      <a href="/docs/infrastructure/react-native-simple-crypto/">
          react-native-simple-crypto
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/operator/" title="Operator" class="dd-item 
        
        
        
        ">
      <a href="/docs/operator/">
          Operator
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs/'>Introduction</a> > <a href='/docs/infrastructure/'>Infrastructure</a> > client
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#automating-things-with-travis-and-semantic-release">Automating things with Travis and semantic-release</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              client
            </h1>
          

        




	

<p>This guide should help you setup from scratch or understand how the CI for <a href="https://github.com/egendata/client">client</a> is configured</p>

<h2 id="automating-things-with-travis-and-semantic-release">Automating things with Travis and semantic-release</h2>

<ul>
<li><p>This project is meant to be used as an NPM package, as so we automate the process of publishing to NPM</p></li>

<li><p>We use <a href="https://travis-ci.com/">Travis CI</a> to build, test and deploy. It is free as long as the project you build is open source</p></li>

<li><p>The way Travis CI works is that everytime your repository is updated (new branch, new commit, new tag) it picks up that branch and will run the specified tasks from your configuration</p></li>

<li><p>We use <a href="https://github.com/semantic-release/semantic-release">semantic-release</a> for automating the package release workflow based on the commit messages</p></li>

<li><p>The <a href="https://github.com/egendata/client/blob/master/.travis.yml">Travis configuration</a> is rather simple and consists of 2 stages (<code>lint-and-test</code> and <code>publish</code>)</p>

<ul>
<li><p><code>lint-and-test</code> stage runs for every branch (except <code>master</code>) and it will install npm dependencies, run lint and unit tests; This is a good tool that assists you when you review a pull-request as you can see that tests are failing or passing</p></li>

<li><p><code>publish</code> stage runs only on the <code>master</code> branch and it runs <code>semantic-release</code></p></li>
</ul></li>

<li><p>We also set several environment variable <a href="https://travis-ci.com/egendata/client/settings">inside Travis</a>:</p>

<ul>
<li><p><code>GITHUB_TOKEN</code> is used for push back to Github a new release, update CHANGELOG (it needs to have write access to the repository)</p></li>

<li><p><code>NPM_TOKEN</code> is used for publishing to NPM</p></li>
</ul></li>

<li><p>For <code>semantic-release</code> we have the following dev dependencies (plugins) installed at the time of writing this (<code>semantic-release</code> comes with a set of plugins included and some we install and explain further down):</p>

<pre><code class="language-json">&quot;@semantic-release/changelog&quot;: &quot;^3.0.4&quot;,
&quot;@semantic-release/git&quot;: &quot;^7.0.16&quot;,
&quot;semantic-release&quot;: &quot;^15.13.24&quot;,
</code></pre></li>

<li><p>We mostly use <a href="https://semantic-release.gitbook.io/semantic-release/extending/plugins-list">semantic-release plugins</a> with the default configuration and the pipeline for it looks as follows as defined in the <a href="https://github.com/egendata/client/blob/master/.releaserc.json">.releaserc.json</a></p>

<pre><code class="language-json">{
&quot;plugins&quot;: [
  &quot;@semantic-release/commit-analyzer&quot;,
  &quot;@semantic-release/release-notes-generator&quot;,
  &quot;@semantic-release/changelog&quot;,
  &quot;@semantic-release/npm&quot;,
  &quot;@semantic-release/github&quot;,
  &quot;@semantic-release/git&quot;
]
}
</code></pre></li>

<li><p>Now let&rsquo;s dive deeper into each plugin and what and why we do things in this way:</p>

<ul>
<li><p><code>@semantic-release/commit-analyzer</code> is the one that analyzes commits since the last release and determines if a new and what type of release should be made; It is going to retrieve the latest Git tag from the Github repo and go through the commits made since that tag and determine if a new release should be made (that is if <code>fix:</code> or <code>feat:</code> commits are present)</p></li>

<li><p><strong>!!! IMPORTANT NOTICE: If you add <code>semantic-release</code> to a new project and don&rsquo;t want your first release to bump directly to 1.0.0 you should manually create a git tag like <code>git tag v0.0.0</code> in case you have initialized your repo version with 0.0.0 in the <code>package.json</code> and push the tag to remote before running <code>semantic-release</code>. This will make so that it determines the next version based on 0.0.0 !!!</strong></p></li>

<li><p><code>@semantic-release/release-notes-generator</code> is the one that makes the release notes look nice like this:</p></li>
</ul>

<p><img src="./release-notes.png" alt="release notes" /></p>

<ul>
<li><p><code>@semantic-release/changelog</code> is the module that creates and updates the <a href="https://github.com/egendata/client/blob/master/CHANGELOG.md">CHANGELOG</a></p></li>

<li><p><code>@semantic-release/npm</code> is used to publish to NPM.</p></li>

<li><p><strong>!!! IMPORTANT NOTICE: If you are setting this up for a new project that should be <a href="https://www.npmjs.com/settings/egendata/packages">scoped to @egendata</a> you need this following part inside your <code>package.json</code> to be able to create the package !!!</strong></p>

<pre><code class="language-json">&quot;publishConfig&quot;: {
&quot;access&quot;: &quot;public&quot;
},
</code></pre></li>

<li><p><code>@semantic-release/github</code> is the one that pushes the new tag and release notes back to Github and needs the <code>GITHUB_TOKEN</code> environment variable set in Travis</p></li>

<li><p><code>@semantic-release/git</code> is an extra plugin that we added because we want to commit and push back to Github the updated <code>CHANGELOG.md</code> and <code>package.json</code>. Without this module the <code>package.json</code> is never pushed back to Github, this isn&rsquo;t a problem since <code>semantic-release</code> determines the next version based on existing Git tags but it&rsquo;s nice to have it updated. It uses the default configuration and commits with <code>chore:</code> which will not trigger a new release.</p></li>
</ul>

<p><img src="./semantic-git-commit.png" alt="release notes" /></p></li>
</ul>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/docs/infrastructure/cli/" title="cli"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/docs/infrastructure/example-cv/" title="Example-CV" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js?1571319208"></script>
    <script src="/docs/js/perfect-scrollbar.min.js?1571319208"></script>
    <script src="/docs/js/perfect-scrollbar.jquery.min.js?1571319208"></script>
    <script src="/docs/js/jquery.sticky.js?1571319208"></script>
    <script src="/docs/js/featherlight.min.js?1571319208"></script>
    <script src="/docs/js/highlight.pack.js?1571319208"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom-3.6.0.js?1571319208"></script>
    <script src="/docs/js/learn.js?1571319208"></script>
    <script src="/docs/js/hugo-learn.js?1571319208"></script>

    <link href="/docs/mermaid/mermaid.css?1571319208" rel="stylesheet" />
    <script src="/docs/mermaid/mermaid.js?1571319208"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
